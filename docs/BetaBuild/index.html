<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/xtendly-prosperna-react-native-boilerplate/blog/rss.xml" title="React Native Boilerplate RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/xtendly-prosperna-react-native-boilerplate/blog/atom.xml" title="React Native Boilerplate Atom Feed"><title data-react-helmet="true">Beta build 🧪 | React Native Boilerplate</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://jericok.github.io/xtendly-prosperna-react-native-boilerplate/docs/BetaBuild"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Beta build 🧪 | React Native Boilerplate"><meta data-react-helmet="true" name="description" content="🚧 It&#x27;s a Work In Progress section 🚧"><meta data-react-helmet="true" property="og:description" content="🚧 It&#x27;s a Work In Progress section 🚧"><link data-react-helmet="true" rel="icon" href="/xtendly-prosperna-react-native-boilerplate/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://jericok.github.io/xtendly-prosperna-react-native-boilerplate/docs/BetaBuild"><link data-react-helmet="true" rel="alternate" href="https://jericok.github.io/xtendly-prosperna-react-native-boilerplate/docs/BetaBuild" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://jericok.github.io/xtendly-prosperna-react-native-boilerplate/docs/BetaBuild" hreflang="x-default"><link rel="stylesheet" href="/xtendly-prosperna-react-native-boilerplate/assets/css/styles.c5314117.css">
<link rel="preload" href="/xtendly-prosperna-react-native-boilerplate/assets/js/runtime~main.f253fcdc.js" as="script">
<link rel="preload" href="/xtendly-prosperna-react-native-boilerplate/assets/js/main.b0482b31.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/xtendly-prosperna-react-native-boilerplate/"><div class="navbar__logo"><img src="/xtendly-prosperna-react-native-boilerplate/img/TOM-small.png" alt="React Native Boilerplate" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/xtendly-prosperna-react-native-boilerplate/img/TOM-small.png" alt="React Native Boilerplate" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">KDEV</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/xtendly-prosperna-react-native-boilerplate/docs/Introduction">Docs</a><a class="navbar__item navbar__link" href="/xtendly-prosperna-react-native-boilerplate/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/JericoK/xtendly-prosperna-react-native-boilerplate" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">🌜</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">🌞</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/xtendly-prosperna-react-native-boilerplate/docs/Introduction">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/xtendly-prosperna-react-native-boilerplate/docs/Installation">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/xtendly-prosperna-react-native-boilerplate/docs/Navigation">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/xtendly-prosperna-react-native-boilerplate/docs/Navigation">Navigation 📱</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/xtendly-prosperna-react-native-boilerplate/docs/Components">Component Patterns 🧩</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/xtendly-prosperna-react-native-boilerplate/docs/StateManagement">State Management 🗃️</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/xtendly-prosperna-react-native-boilerplate/docs/UsingFlipper">Using Flipper 🐛</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/xtendly-prosperna-react-native-boilerplate/docs/BetaBuild">Beta build 🧪</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Beta build 🧪</h1></header><p>🚧 It&#x27;s a Work In Progress section 🚧</p><header><h1>Distributing beta builds</h1></header><p>Developers love writing React Native code but no one likes deploying React Native app or distributing beta builds.</p><p>All your headaches will disappear with this documentation and the amazing <a href="https://fastlane.tools/" target="_blank" rel="noopener noreferrer">Fastlane</a> tool :)</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="before-you-start">Before you start<a class="hash-link" href="#before-you-start" title="Direct link to heading">​</a></h2><p>You need a Mac. I&#x27;m sorry, but if you are a Windows user, you can stop reading right now.<br>
<!-- -->Fastlane will not work on Windows PC. But in all cases, if you need to deploy your app on IOS, you must have a Mac.</p><p>Let&#x27;s explain which tools we are using to distribute beta builds:</p><ul><li><a href="https://fastlane.tools/" target="_blank" rel="noopener noreferrer">Fastlane</a>, the easiest way to automate beta deployments and releases for your iOS and Android apps. It handles all tedious tasks like generating screenshots, dealing with code signing and releasing your application.</li><li><a href="https://developer.apple.com/testflight/" target="_blank" rel="noopener noreferrer">TestFlight</a>, part of App Store Connect, let you build your iOS app and invite internal or external users to test it</li><li><a href="https://support.google.com/googleplay/android-developer/answer/3131213?hl=fr" target="_blank" rel="noopener noreferrer">Google Play</a>, which does the same job as TestFlight for Android apps</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="installing-fastlane">Installing Fastlane<a class="hash-link" href="#installing-fastlane" title="Direct link to heading">​</a></h2><p>First you need to install Fastlane on your Mac. Follow these steps:</p><ol><li>Install the latest Xcode command line tools:</li></ol><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ xcode-select --install</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol start="2"><li>Install Ruby using <a href="https://brew.sh/" target="_blank" rel="noopener noreferrer">Homebrew</a>:</li></ol><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ brew install ruby</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ol start="3"><li>Install Fastlane with RubyGems:</li></ol><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo gem install fastlane -NV</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>You are now ready to set up Fastlane for iOS and Android 🚀</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="ios">iOS<a class="hash-link" href="#ios" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h3><p>Before continuing make sure you have:</p><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Install all <a href="https://facebook.github.io/react-native/docs/getting-started.html#installing-dependencies" target="_blank" rel="noopener noreferrer">required dependencies</a>, with Xcode 9 or higher</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Choose the <a href="https://cocoacasts.com/what-are-app-ids-and-bundle-identifiers/" target="_blank" rel="noopener noreferrer">bundle identifier</a> of your app (for example <code>com.tcm.boilerplate</code>)</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->An Apple ID with an admin user, with its username (email, for example <code>dev-team@yourcompany.com</code>) and password</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Your app name, if not already created on the Developer Portal (for example <code>TCM React Native Boilerplate</code>). Fastlane can create applications in the Developer Portal and App Store Connect, so it&#x27;s recommended to let Fastlane do the job for you.</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Use the right <a href="https://github.com/thecodingmachine/react-native-boilerplate/blob/master/template/ios/.gitignore" target="_blank" rel="noopener noreferrer">.gitignore</a> file inside the <code>ios</code> directory</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->You also need to create an App Icon to use Fastlane or you will get an error on running <code>fastlane beta</code>. You can simply create one using the website <a href="https://makeappicon.com/" target="_blank" rel="noopener noreferrer">MakeAppIcon</a></li></ul><p>Open your Xcode project and modify some information:</p><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->In the <code>General</code> tab, <code>Identity</code> section, change the <code>Bundle Identifier</code> to your identifier (useful for Fastlane)</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->In the <code>Signing &amp; Capabilities</code> tab, <code>Signing</code> section, disable <code>Automatically manage signing</code></li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->In the <code>Build Settings</code> tab, set view filter on top to <code>All</code> and <code>Combined</code>, then go to the <code>Signing</code> section and into <code>Code Signing Identity</code>, set <code>Apple Development</code> for the <code>debug</code> line (including <code>Any iOS SDK</code> also) and set <code>Apple Distribution</code> for the <code>release</code> line (including <code>Any iOS SDK</code> also).</li></ul><p>Like this:</p><table><thead><tr><th>Code Signing Identity</th><th>&lt; Multiple values &gt;</th></tr></thead><tbody><tr><td>Debug</td><td>Apple Development</td></tr><tr><td>Any iOS SDK</td><td>Apple Development</td></tr><tr><td>Release</td><td>Apple Distribution</td></tr><tr><td>Any iOS SDK</td><td>Apple Distribution</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_31ik" id="setting-up">Setting up<a class="hash-link" href="#setting-up" title="Direct link to heading">​</a></h3><p>First you need to set up Fastlane for your iOS project:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd my-project/ios</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ fastlane init</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><em>Note: If you have an error on this step, please see the <code>issues</code> section.</em></p><p>Fastlane will automatically detect your project and ask for any missing information.</p><p>The following questions will be asked:</p><ul><li><p><code>What would you like to use fastlane for?</code></p><ul><li>For this tutorial a good answer is <code>2 - Automate beta distribution to TestFlight</code></li></ul></li><li><p><code>Select Scheme:</code></p><ul><li>Here we will select the scheme without <code>-tvOS</code> suffix</li></ul></li><li><p><code>Apple ID Username:</code></p><ul><li>If you don&#x27;t know, you didn&#x27;t read the &quot;Prerequisites&quot; step :)<br>Our answer is <code>dev-team@yourcompany.com</code></li></ul></li><li><p><code>Password (for Apple ID Username):</code></p><ul><li>If you don&#x27;t know, you didn&#x27;t read the &quot;Prerequisites&quot; step :)<br>Our answer is <code>keep it secret</code></li></ul></li><li><p>If your account has multiple teams in the App Store Connect, you may have this question: <code>Multiple App Store Connect teams found, please enter the number of the team you want to use:</code></p><ul><li>Select the right team</li></ul></li><li><p>If your account has multiple teams in the Developer Portal, you may have this question: <code>Multiple teams found on the Developer Portal, please enter the number of the team you want to use:</code></p><ul><li>Select the right team</li></ul></li><li><p>If you haven&#x27;t already created the App on the Developer Portal or App Store Connect, Fastlane can do it for you! (else you must have a message <code>Your app &#x27;com.tcm.boilerplate&#x27; is available in your Apple Developer Portal / App Store Connect</code>)</p><ul><li>It will ask <code>Do you want fastlane to create the App ID for you on the Apple Developer Portal / App Store Connect? (y/n)</code><ul><li>Type <code>y</code></li></ul></li><li><code>App Name</code>:<ul><li><code>TCM React Native Boilerplate</code></li></ul></li></ul></li></ul><p>Fastlane will then give you some information about git, the files it will create, etc. Just type <code>enter</code> to continue.</p><p><strong>Congrats!</strong> Fastlane has created some files.</p><p>If you are using Git, commit all generated files.</p><p>Once the setup has finished you can see a new folder inside the <code>ios</code> folder:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> - fastlane/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Appfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Fastfile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It&#x27;s not finish, you need to follow <code>Code Signing</code> part to setting up a provisioning profile.</p><p>For information:</p><p><code>Appfile</code> contains identifiers used to connect to the Developer Portal and App Store Connect.
You can read more about this file <a href="https://docs.fastlane.tools/advanced/#appfile" target="_blank" rel="noopener noreferrer">here</a>.</p><p><code>Fastfile</code> contains all actions you can launch.
You can read more about this file <a href="https://docs.fastlane.tools/actions" target="_blank" rel="noopener noreferrer">here</a>.
Because we previously chose <code>Automate beta distribution to TestFlight</code> on set up, a <code>beta</code> <a href="https://docs.fastlane.tools/advanced/lanes/" target="_blank" rel="noopener noreferrer">lane</a> is available by default.
This <code>lane</code> contains 3 actions:</p><ul><li>increment the build number of your app</li><li>build your app</li><li>upload to TestFlight</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="code-signing">Code signing<a class="hash-link" href="#code-signing" title="Direct link to heading">​</a></h3><p>Signing your app assures users that it is from a known source and the app hasn’t been modified since it was last signed. Before your app can integrate app services, be installed on a device, or be submitted to the App Store, it must be signed with a certificate issued by Apple.</p><p>A full guide is available on the fastlane doc, describing the best approaches for your <a href="https://docs.fastlane.tools/codesigning/getting-started/" target="_blank" rel="noopener noreferrer">code signing process</a>.</p><p>Using <code>match</code> is probably <a href="https://codesigning.guide/" target="_blank" rel="noopener noreferrer">the best solution</a>.<br>
<!-- -->Because we don&#x27;t want to revoke our existing certificates, but still want an automated setup, we will use <a href="https://docs.fastlane.tools/codesigning/getting-started/#using-cert-and-sigh" target="_blank" rel="noopener noreferrer">cert and sigh</a>.</p><p>Add the following lines to your <code>Fastfile</code>, just after the <code>increment_build_number</code> function and before <code>build_app</code> (Note that you will need to replace some information):</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    get_certificates( # Create or get certificate, and install it</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      output_path: &quot;./builds&quot; # Download certificate in the build folder (you don&#x27;t need to create the folder)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    get_provisioning_profile( # Create or get provisioning profile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      output_path: &quot;./builds&quot;,  # Download provisioning profile in the build folder</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      filename: &quot;provisioning.mobileprovision&quot; # Rename the local provisioning profile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    update_project_provisioning( # Set the project provisioning profile (related in Xcode to the General &gt; Signing Release section)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      xcodeproj: &quot;Boilerplate.xcodeproj&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      target_filter: &quot;Boilerplate&quot;, # Name of your project</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      profile: &quot;./builds/provisioning.mobileprovision&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      build_configuration: &quot;Release&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    update_project_team( # Set the right team on your project</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      teamid: CredentialsManager::AppfileConfig.try_fetch_value(:team_id)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then, we need to configure the provisioning profile for the build step.</p><p>Add the following lines to your <code>Fastfile</code>, inside the <code>build_app</code> function, just after the <code>scheme</code> parameter (Make sure you add a <code>,</code> after the <code>scheme</code> parameter):</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    clean: true,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    export_method: &quot;app-store&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    export_options: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      provisioningProfiles: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          CredentialsManager::AppfileConfig.try_fetch_value(:app_identifier) =&gt; CredentialsManager::AppfileConfig.try_fetch_value(:app_identifier) + &quot; AppStore&quot; # Value of this parameter is the name of the Provisioning Profile. By default, it will be &quot;{bundleId} AppStore&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    build_path: &quot;./builds&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    output_directory: &quot;./builds&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Thanks to this the Certificates and Provisioning Profile will be automatically created when you will create a beta build!<br>
<!-- -->🚀 You are now ready to create your first beta build.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="creating-a-beta-build">Creating a beta build<a class="hash-link" href="#creating-a-beta-build" title="Direct link to heading">​</a></h3><p>Creating a beta build and uploading it on TestFlight is now really easy.<br>
<!-- -->Just type the following:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd my-project/ios</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ fastlane beta</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="android">Android<a class="hash-link" href="#android" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="prerequisites-1">Prerequisites<a class="hash-link" href="#prerequisites-1" title="Direct link to heading">​</a></h3><p>Before continuing make sure you have:</p><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->A Google Play Console <em>admin</em> account and its username (email, for example <code>dev-team@yourcompany.com</code>) and password</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Create your application in the Google Play Console (unlike for iOS Fastlane cannot do that for you)</li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Use the right <a href="https://github.com/thecodingmachine/react-native-boilerplate/blob/master/template/android/.gitignore" target="_blank" rel="noopener noreferrer">.gitignore</a> file inside the <code>android</code> directory (if you are using this boilerplate you are good to go)</li><li class="task-list-item"><input type="checkbox" disabled=""> <a href="https://docs.fastlane.tools/getting-started/android/setup/#collect-your-google-credentials" target="_blank" rel="noopener noreferrer">Collect your Google Credentials</a><br>⚠️ In the Google Play Console, add the parameter <code>&amp;hl=en</code> at the end of the URL (before any #) to switch to English. In some languages, the &quot;Create Service Account&quot; will not be available.
Download the JSON key file, and copy it into <code>my-project/android/key.json</code></li><li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Install <a href="https://facebook.github.io/react-native/docs/getting-started.html#installing-dependencies-1" target="_blank" rel="noopener noreferrer">all dependencies</a> for macOS and Android</li></ul><h3 class="anchor anchorWithStickyNavbar_31ik" id="setting-up-1">Setting up<a class="hash-link" href="#setting-up-1" title="Direct link to heading">​</a></h3><p>First you need to set up Fastlane for your android project:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd my-project/android</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ fastlane init</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Fastlane will automatically detect your project and ask for any missing information.</p><p>The following questions will be asked:</p><ul><li><code>Package Name (com.krausefx.app)</code><ul><li>Our answer is <code>com.tcm.boilerplate</code>. Be careful, do not use dashes (-) in your package name.</li></ul></li><li><code>Path to the json secret file</code><ul><li>Type <code>key.json</code> (path to the file previously created in the Prerequisites step)</li></ul></li><li>Download existing metadata and setup metadata management?<ul><li><code>y</code></li></ul></li></ul><p>Fastlane will then give you some information about git, the files it will create, etc. Just type <code>enter</code> to continue.</p><p>Congrats! Fastlane has created some files.<br>
<!-- -->If you are using Git, commit all generated files.</p><p>Once the setup has finished you can see a new folder inside the <code>android</code> folder:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain"> - fastlane/</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Appfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   - Fastfile</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><code>Appfile</code> contains identifiers used to connect to the Google Play Console and the link to the <code>key.json</code> file.<br>
<!-- -->You can read more about this file <a href="https://docs.fastlane.tools/advanced/#appfile" target="_blank" rel="noopener noreferrer">here</a>.</p><p><code>Fastfile</code> contains all actions you can launch.
You can read more about this file <a href="https://docs.fastlane.tools/actions" target="_blank" rel="noopener noreferrer">here</a>.<br>
<!-- -->A <code>beta [lane](https://docs.fastlane.tools/advanced/lanes/)</code>, a <code>deploy lane</code> and a <code>test lane</code> are available by default.</p><p>You can remove the <code>deploy lane</code> to avoid some mistakes, and replace the <code>beta</code> lane by the following:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  desc &quot;Submit a new Beta Build to Play Store&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  lane :beta do</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    store_password = prompt(text: &quot;Signing Store Password: &quot;, secure_text: true)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    key_password = prompt(text: &quot;Alias Key Password: &quot;, secure_text: true)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    releaseFilePath = File.join(Dir.pwd, &quot;..&quot;, &quot;my-release-key.keystore&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    gradle(task: &#x27;clean&#x27;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    gradle(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      task: &#x27;bundle&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      build_type: &#x27;Release&#x27;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      print_command: false,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      properties: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;android.injected.signing.store.file&quot; =&gt; releaseFilePath,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;android.injected.signing.store.password&quot; =&gt; store_password,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;android.injected.signing.key.alias&quot; =&gt; &quot;my-key-alias&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;android.injected.signing.key.password&quot; =&gt; key_password,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    upload_to_play_store(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      track: &#x27;internal&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>As you can see, we need to sign our APK with a signing key.
Don&#x27;t worry, we will generate it in a moment, let&#x27;s just explain what the lane do.</p><p>First, script ask the user two values : signing store and alias key passwords, with the <a href="https://docs.fastlane.tools/actions/prompt/" target="_blank" rel="noopener noreferrer"><code>prompt</code></a> fastlane plugin.
Asking the user those passwords ensure that no secret keys are stored into your app.<br>
<!-- -->Then, this lane clean your project, assemble the application, automatically injecting signing configuration at runtime, before uploading it in the Google Play Store.<br>
<!-- -->Upload is made <code>internally</code>, that means only internal testers will be allowed to download the app. You can learn more about different test types <a href="https://support.google.com/googleplay/android-developer/answer/3131213" target="_blank" rel="noopener noreferrer">here</a>.</p><h4 class="anchor anchorWithStickyNavbar_31ik" id="generating-a-signing-key">Generating a signing key<a class="hash-link" href="#generating-a-signing-key" title="Direct link to heading">​</a></h4><p><a href="https://facebook.github.io/react-native/docs/signed-apk-android#generating-a-signing-key" target="_blank" rel="noopener noreferrer">Official documentation</a> well explained how to generate a signing key.</p><p>You simply need to run the following :</p><div class="codeBlockContainer_K1bP language-bash theme-code-block"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">keytool -genkey -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize </span><span class="token number" style="color:rgb(247, 140, 108)">2048</span><span class="token plain"> -validity </span><span class="token number" style="color:rgb(247, 140, 108)">10000</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>This command prompts you for passwords for the keystore and key and for the Distinguished Name fields for your key.<br>
<!-- -->It then generates the keystore as a file called <code>my-release-key.keystore</code></p><p>Note: Remember to keep your keystore file private and never commit it to version control.</p><p>Copy the generated <code>my-release-key.keystore</code> file into the root of <code>android</code> folder.</p><p>You&#x27;re now good to build and deploy !</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="creating-a-beta-build-1">Creating a beta build<a class="hash-link" href="#creating-a-beta-build-1" title="Direct link to heading">​</a></h3><p>⚠️ The first time you deploy your application, you MUST upload it into Google Play Console <code>manually</code>.
Google don&#x27;t allow to use theirs APIs for the first upload.<br>
<!-- -->To do this, comment the three last lines of the <code>Fastfile</code></p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">#upload_to_play_store(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#      track: &#x27;internal&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">#    )</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>or create a new lane without those lines.</p><p>❗ There is no official plugin to automatically upgrade android version code (unlike the iOS lane).<br>
<!-- -->Before each deployment, be sure to <code>manually</code> upgrade the <code>versionCode</code> value inside <code>android/app/build.gradle</code>.<br>
<!-- -->We are working on an automatic way to do this.</p><p>Creating a beta build and uploading it on Google Play is now really easy.<br>
<!-- -->Just type the following:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ cd my-project/android</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ fastlane beta</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_31ik" id="stuck-at-bundle-install-or-bundle-update-running-fastlane-init">Stuck at <code>bundle install</code> or <code>bundle update</code> running <code>fastlane init</code><a class="hash-link" href="#stuck-at-bundle-install-or-bundle-update-running-fastlane-init" title="Direct link to heading">​</a></h3><p>If the <code>fastlane init</code> process is stuck when running <code>bundle install</code> or <code>bundle update</code> it may mean that <code>bundle</code> command is asking for root permissions.<br>
<!-- -->You can stop the process and retry again with <code>sudo fastlane init</code>, however you will need to change back ownership of the generated files to your user when it finishes by running this command:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo chown &lt;your-user&gt; &lt;files&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="permission-denied-running-android-beta-lane">Permission denied running android beta lane<a class="hash-link" href="#permission-denied-running-android-beta-lane" title="Direct link to heading">​</a></h3><p>If you have a <code>Permission denied</code> issue on an android beta build, please run:</p><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ chmod a+x /my-project/android/gradlew</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="fastlane-init-failed">Fastlane init failed<a class="hash-link" href="#fastlane-init-failed" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_K1bP theme-code-block"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">fastlane init failed</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">[&quot;The request could not be completed because:&quot;, &quot;Could not receive latest API key from App Store Connect, this might be a server issue.&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Something failed while running `fastlane init`</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Tried using Apple ID with email &#x27;dev-team@yourcompany.com&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">You can either retry, or fallback to manual setup which will create a basic Fastfile</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Would you like to fallback to a manual Fastfile? (y/n)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Answer <code>n</code>, and retry previous steps with a correct Apple ID and password.<br>
<!-- -->Make sure you are connected to internet.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="execution-failed-for-task-apppackagerelease-android">Execution failed for task &#x27;:app:packageRelease&#x27;. (Android)<a class="hash-link" href="#execution-failed-for-task-apppackagerelease-android" title="Direct link to heading">​</a></h3><p>Make sure the tree structure is equivalent to the android app id.
In this example, the app id will be com.boilerplate:
<img src="/xtendly-prosperna-react-native-boilerplate/assets/images/Tree_path_example-d05efad6b220b26fff9d8b05e1331041.png">,</p><p>Of course, after choosing your app id, you can update the tree structure and make sure <code>MainActivity.java</code> and <code>MainApplication.java</code> contain the right package name (first line of the file).</p><hr><p>If you need more informations, don&#x27;t hesitate to read the <a href="https://docs.fastlane.tools/" target="_blank" rel="noopener noreferrer">fastlane documentation</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/thecodingmachine/react-native-boilerplate/edit/master/website-documentation/docs/docs/3_Guides/BetaBuild.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/xtendly-prosperna-react-native-boilerplate/docs/UsingFlipper"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using Flipper 🐛</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#before-you-start" class="table-of-contents__link toc-highlight">Before you start</a></li><li><a href="#installing-fastlane" class="table-of-contents__link toc-highlight">Installing Fastlane</a></li><li><a href="#ios" class="table-of-contents__link toc-highlight">iOS</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#setting-up" class="table-of-contents__link toc-highlight">Setting up</a></li><li><a href="#code-signing" class="table-of-contents__link toc-highlight">Code signing</a></li><li><a href="#creating-a-beta-build" class="table-of-contents__link toc-highlight">Creating a beta build</a></li></ul></li><li><a href="#android" class="table-of-contents__link toc-highlight">Android</a><ul><li><a href="#prerequisites-1" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#setting-up-1" class="table-of-contents__link toc-highlight">Setting up</a></li><li><a href="#creating-a-beta-build-1" class="table-of-contents__link toc-highlight">Creating a beta build</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#stuck-at-bundle-install-or-bundle-update-running-fastlane-init" class="table-of-contents__link toc-highlight">Stuck at <code>bundle install</code> or <code>bundle update</code> running <code>fastlane init</code></a></li><li><a href="#permission-denied-running-android-beta-lane" class="table-of-contents__link toc-highlight">Permission denied running android beta lane</a></li><li><a href="#fastlane-init-failed" class="table-of-contents__link toc-highlight">Fastlane init failed</a></li><li><a href="#execution-failed-for-task-apppackagerelease-android" class="table-of-contents__link toc-highlight">Execution failed for task &#39;:app:packageRelease&#39;. (Android)</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/xtendly-prosperna-react-native-boilerplate/img/MAIN.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/xtendly-prosperna-react-native-boilerplate/img/MAIN.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></div><div class="footer__copyright">Copyright © 2022 Xtendly x Prosperna. Built with Docusaurus.</div></div></div></footer></div>
<script src="/xtendly-prosperna-react-native-boilerplate/assets/js/runtime~main.f253fcdc.js"></script>
<script src="/xtendly-prosperna-react-native-boilerplate/assets/js/main.b0482b31.js"></script>
</body>
</html>